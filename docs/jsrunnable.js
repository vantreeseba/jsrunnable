!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){const n=r(2);window&&(window.Runnable=n)},function(e,t,r){const n=r(3),s=r(4);e.exports=class{constructor(){this._workers=[],this._workerOpMap=new Map,this._resultMap=new Map,this._lastWorkerIndex=0;const e=e=>{const t=e.data;"result"===t.type&&this._resultMap.has(t.callId)&&this._resultMap.get(t.callId).resolve(t.result),"error"===t.type&&this._resultMap.has(t.name)&&this._resultMap.get(t.name).reject(t.err),this._resultMap.delete(t.callId)},t=e=>{const t=ev.data;this._resultMap.has(t.name)&&this._resultMap.get(t.name).reject(e)};this.cores=navigator&&navigator.hardwareConcurrency||1;for(var r=0;r<this.cores;r++){const r=n.buildWorker(s);r.onmessage=e,r.onerror=t,this._workers.push(r)}}add(e,t=1){const r=e.name||n.randomId("id");return this._compile(r,e,t),(...e)=>this._call(r,...e)}_call(e,...t){e=e.name||e;const r=this._workers[this._getAndMoveIndexInOpMap(e)],s=n.randomId("call");return r.postMessage({type:"call",args:t,name:e,callId:s}),new Promise((e,t)=>{this._resultMap.set(s,{resolve:e,reject:t})})}_getAndMoveIndexInOpMap(e){const t=this._workerOpMap.get(e),r=t.pop();return t.unshift(r),r}_compile(e,t,r=1){if(this._workerOpMap.has(e))return;r=r>=1?r:1;const s={type:"compile",func:n.functionToMessage(t,e)},o=this._workerOpMap.get(e)||[];for(var a=0;a<r;a++){const e=this._lastWorkerIndex%this.cores;this._workers[e].postMessage(s),-1===o.indexOf(e)&&o.push(e),this._lastWorkerIndex++}this._workerOpMap.set(e,o)}}},function(e,t){class r{static funcToString(e){let t=e.toString();const r=t.indexOf("=>"),n=t.indexOf("(")>r||-1===t.indexOf("(");if(!t.startsWith("function")&&n){t="("+t.substring(0,r).trim()+") "+t.substring(r,t.length)}return t.trim()}static buildWorker(e){const t="("+r.funcToString(e)+")()";let n;if(window){var s=new Blob([t]),o=URL.createObjectURL(s,{type:"text/javascript"});n=new Worker(o)}else{if(!Worker)throw"You need node 10.x to use workers";n=new Worker(t,{eval:!0})}return n}static functionToMessage(e,t){var n=r.funcToString(e),s=n.substring(n.indexOf("(")+1,n.indexOf(")")),o=n.substring(n.indexOf("{")+1,n.lastIndexOf("}"));return{name:t||e.name,args:s,body:o}}static randomId(e=""){return e+"_"+Math.floor(Math.random()*Date.now())}}e.exports=r},function(e,t){e.exports=function(){const e=new Map,t=async t=>{try{((e,t)=>{postMessage({type:"result",name:e.name,callId:e.callId,result:t})})(t,await e.get(t.name)(...t.args))}catch(e){((e,t)=>{postMessage({type:"error",name:e.name,callId:e.callId,err:t})})(t,e)}};onmessage=(r=>{const n=r.data;"compile"===n.type?(t=>{const r=new Function(t.func.args.split(","),t.func.body);e.set(t.func.name,r)})(n):"call"===n.type&&t(n)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vcnVubmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vd29ya2VyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUnVubmFibGUiLCJ3aW5kb3ciLCJVdGlscyIsIldvcmtlciIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJfd29ya2VycyIsIl93b3JrZXJPcE1hcCIsIk1hcCIsIl9yZXN1bHRNYXAiLCJfbGFzdFdvcmtlckluZGV4Iiwib25tZXNzYWdlIiwiZXYiLCJtZXNzYWdlIiwiZGF0YSIsInR5cGUiLCJoYXMiLCJjYWxsSWQiLCJyZXNvbHZlIiwicmVzdWx0IiwicmVqZWN0IiwiZXJyIiwiZGVsZXRlIiwib25lcnJvciIsImNvcmVzIiwibmF2aWdhdG9yIiwiaGFyZHdhcmVDb25jdXJyZW5jeSIsIndvcmtlciIsImJ1aWxkV29ya2VyIiwicHVzaCIsImZ1bmMiLCJ3b3JrZXJOdW0iLCJyYW5kb21JZCIsIl9jb21waWxlIiwiYXJncyIsIl9jYWxsIiwiX2dldEFuZE1vdmVJbmRleEluT3BNYXAiLCJwb3N0TWVzc2FnZSIsIlByb21pc2UiLCJzZXQiLCJvcE1hcCIsIndvcmtlcklkIiwicG9wIiwidW5zaGlmdCIsIm9wIiwiZnVuY3Rpb25Ub01lc3NhZ2UiLCJpbmRleCIsImluZGV4T2YiLCJzdHJpbmdGdW5jIiwidG9TdHJpbmciLCJhcnJvd0luZGV4Iiwibm9BcmdQYXJlbnMiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwidHJpbSIsImxlbmd0aCIsIndvcmtlckZ1bmMiLCJmdW5jV3JhcHBlZCIsImZ1bmNUb1N0cmluZyIsImJsb2IiLCJCbG9iIiwidXJpIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZXZhbCIsImZ1bmNTdHJpbmciLCJib2R5IiwibGFzdEluZGV4T2YiLCJwcmVmaXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJEYXRlIiwibm93IiwiZnVuY01hcCIsImFzeW5jIiwicG9zdFJlc3VsdCIsInBvc3RFcnJvciIsImNvbXBpbGVkIiwiRnVuY3Rpb24iLCJzcGxpdCIsImNvbXBpbGUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEs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ODQ0ODIwNzIwYjk1ZSIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBSdW5uYWJsZSA9IHJlcXVpcmUoJy4vcnVubmFibGUnKTtcblxuaWYod2luZG93KSB7XG4gIHdpbmRvdy5SdW5uYWJsZSA9IFJ1bm5hYmxlO1xufVxuIiwiY29uc3QgVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5jb25zdCBXb3JrZXIgPSByZXF1aXJlKCcuL3dvcmtlcicpO1xuLyoqXG4gKiBSdW5uYWJsZVxuICovXG5jbGFzcyBSdW5uYWJsZSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKiBAcmV0dXJuIHtSdW5uYWJsZX1cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3dvcmtlcnMgPSBbXTtcbiAgICB0aGlzLl93b3JrZXJPcE1hcCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLl9yZXN1bHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fbGFzdFdvcmtlckluZGV4ID0gMDtcblxuICAgIGNvbnN0IG9ubWVzc2FnZSA9IChldikgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGV2LmRhdGE7XG5cbiAgICAgIGlmKG1lc3NhZ2UudHlwZSA9PT0gJ3Jlc3VsdCcgJiYgdGhpcy5fcmVzdWx0TWFwLmhhcyhtZXNzYWdlLmNhbGxJZCkpIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0TWFwLmdldChtZXNzYWdlLmNhbGxJZCkucmVzb2x2ZShtZXNzYWdlLnJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGlmKG1lc3NhZ2UudHlwZSA9PT0gJ2Vycm9yJyAmJiB0aGlzLl9yZXN1bHRNYXAuaGFzKG1lc3NhZ2UubmFtZSkpIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0TWFwLmdldChtZXNzYWdlLm5hbWUpLnJlamVjdChtZXNzYWdlLmVycik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3Jlc3VsdE1hcC5kZWxldGUobWVzc2FnZS5jYWxsSWQpO1xuICAgIH07XG5cbiAgICBjb25zdCBvbmVycm9yID0gKGVycikgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGV2LmRhdGE7XG4gICAgICBpZih0aGlzLl9yZXN1bHRNYXAuaGFzKG1lc3NhZ2UubmFtZSkpIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0TWFwLmdldChtZXNzYWdlLm5hbWUpLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgIH07XG5cblxuICAgIHRoaXMuY29yZXMgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgfHwgMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29yZXM7IGkrKykge1xuICAgICAgY29uc3Qgd29ya2VyID0gVXRpbHMuYnVpbGRXb3JrZXIoV29ya2VyKTtcbiAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBvbm1lc3NhZ2U7XG4gICAgICB3b3JrZXIub25lcnJvciA9IG9uZXJyb3I7XG5cbiAgICAgIHRoaXMuX3dvcmtlcnMucHVzaCh3b3JrZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZnVuY3Rpb25zIHRvIHdvcmtlcnMgdG8gY2FsbC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB0byBhc3NpZ24gdG8gd29ya2Vycy5cbiAgICogQHJldHVybiB7RnVuY3Rpb259IEEgd3JhcHBlZCBmdW5jdGlvbiB0aGF0IGNhbGxzIHRoZSB3b3JrZXIgYW5kIHJldHVybnMgcmVzdWx0cyBpbiBhIHByb21pc2UuXG4gICAqL1xuICBhZGQoZnVuYywgd29ya2VyTnVtID0gMSkge1xuICAgIGNvbnN0IG5hbWUgPSBmdW5jLm5hbWUgfHwgVXRpbHMucmFuZG9tSWQoJ2lkJyk7XG4gICAgdGhpcy5fY29tcGlsZShuYW1lLCBmdW5jLCB3b3JrZXJOdW0pO1xuXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FsbChuYW1lLCAuLi5hcmdzKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIHJlbW90ZSBmdW5jdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jYWxsKG5hbWUsIC4uLmFyZ3MpIHtcbiAgICBuYW1lID0gbmFtZS5uYW1lIHx8IG5hbWU7XG4gICAgY29uc3Qgd29ya2VyID0gdGhpcy5fd29ya2Vyc1t0aGlzLl9nZXRBbmRNb3ZlSW5kZXhJbk9wTWFwKG5hbWUpXTtcbiAgICBjb25zdCBjYWxsSWQgPSBVdGlscy5yYW5kb21JZCgnY2FsbCcpO1xuXG4gICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgIHR5cGU6J2NhbGwnLFxuICAgICAgYXJnczogYXJncyxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBjYWxsSWQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fcmVzdWx0TWFwLnNldChjYWxsSWQsIHtyZXNvbHZlLCByZWplY3R9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQncyB0aGUgbmV4dCB3b3JrZXIgdG8gY2FsbCBpbiBhIHJvdW5kIHJvYmluIGZhc2hpb24uXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGdldCB3b3JrZXIgbWFwIGZvci5cbiAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgd29ya2VyIGlkIHRvIGNhbGwuXG4gICAqL1xuICBfZ2V0QW5kTW92ZUluZGV4SW5PcE1hcChuYW1lKSB7XG4gICAgY29uc3Qgb3BNYXAgPSB0aGlzLl93b3JrZXJPcE1hcC5nZXQobmFtZSk7XG4gICAgY29uc3Qgd29ya2VySWQgPSBvcE1hcC5wb3AoKTtcbiAgICBvcE1hcC51bnNoaWZ0KHdvcmtlcklkKTtcbiAgICByZXR1cm4gd29ya2VySWQ7XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJuYWwgQ29tcGlsZSBGdW5jdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXBpbGUobmFtZSwgb3AsIHdvcmtlck51bSA9IDEpIHtcbiAgICBpZih0aGlzLl93b3JrZXJPcE1hcC5oYXMobmFtZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3b3JrZXJOdW0gPSB3b3JrZXJOdW0gPj0gMSA/IHdvcmtlck51bSA6IDE7XG5cbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgdHlwZTogJ2NvbXBpbGUnLFxuICAgICAgZnVuYzogVXRpbHMuZnVuY3Rpb25Ub01lc3NhZ2Uob3AsIG5hbWUpLFxuICAgIH07XG5cbiAgICBjb25zdCBvcE1hcCA9IHRoaXMuX3dvcmtlck9wTWFwLmdldChuYW1lKSB8fCBbXTtcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB3b3JrZXJOdW07IGkgKyspIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fbGFzdFdvcmtlckluZGV4ICUgdGhpcy5jb3JlcztcbiAgICAgIHRoaXMuX3dvcmtlcnNbaW5kZXhdLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgaWYob3BNYXAuaW5kZXhPZihpbmRleCkgPT09IC0xKSB7XG4gICAgICAgIG9wTWFwLnB1c2goaW5kZXgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fbGFzdFdvcmtlckluZGV4Kys7XG4gICAgfVxuXG4gICAgdGhpcy5fd29ya2VyT3BNYXAuc2V0KG5hbWUsIG9wTWFwKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJ1bm5hYmxlO1xuIiwiLyoqXG4gKiBVdGlsaXRpZXMgZm9yIGpzcnVubmFibGVcbiAqL1xuY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogU3RyaW5naWZpZXMgYSBmdW5jdGlvblxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gdG8gc3RyaW5naWZ5LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZ2lmaWVkIGZ1bmN0aW9uLlxuICAgKi9cbiAgc3RhdGljIGZ1bmNUb1N0cmluZyhmdW5jKSB7XG4gICAgbGV0IHN0cmluZ0Z1bmMgPSBmdW5jLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYXJyb3dJbmRleCA9IHN0cmluZ0Z1bmMuaW5kZXhPZignPT4nKTtcbiAgICBjb25zdCBub0FyZ1BhcmVucyA9IHN0cmluZ0Z1bmMuaW5kZXhPZignKCcpID4gYXJyb3dJbmRleCB8fCBzdHJpbmdGdW5jLmluZGV4T2YoJygnKSA9PT0gLTE7XG4gICAgaWYoIXN0cmluZ0Z1bmMuc3RhcnRzV2l0aCgnZnVuY3Rpb24nKSl7XG4gICAgICBpZihub0FyZ1BhcmVucykge1xuICAgICAgICBsZXQgYXJncyA9IHN0cmluZ0Z1bmMuc3Vic3RyaW5nKDAsIGFycm93SW5kZXgpLnRyaW0oKTtcbiAgICAgICAgbGV0IGJvZHkgPSBzdHJpbmdGdW5jLnN1YnN0cmluZyhhcnJvd0luZGV4LCBzdHJpbmdGdW5jLmxlbmd0aCk7XG4gICAgICAgIHN0cmluZ0Z1bmMgPSAnKCcgKyBhcmdzICsgJykgJyArIGJvZHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZ0Z1bmMudHJpbSgpO1xuICB9XG5cbiAgLyoqXG4gICogQnVpbGQgYSB3b3JrZXIgY29udGFpbmluZyB0aGUgZ2l2ZW4gZnVuY3Rpb24uXG4gICpcbiAgKiBAc3RhdGljXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gd29ya2VyRnVuYyBUaGUgZnVuY3Rpb24gdG8gYnVpbGQgYSB3b3JrZXIgZm9yLlxuICAqIEByZXR1cm4ge1dvcmtlcn0gd29ya2VyIFRoZSB3b3JrZXIuXG4gICovXG4gIHN0YXRpYyBidWlsZFdvcmtlcih3b3JrZXJGdW5jKSB7XG4gICAgY29uc3QgZnVuY1N0cmluZyA9IFV0aWxzLmZ1bmNUb1N0cmluZyh3b3JrZXJGdW5jKTtcbiAgICBjb25zdCBmdW5jV3JhcHBlZCA9ICcoJyArIGZ1bmNTdHJpbmcgKyAnKSgpJztcbiAgICBsZXQgd29ya2VyO1xuICAgIGlmKHdpbmRvdykge1xuICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZnVuY1dyYXBwZWRdKTtcbiAgICAgIHZhciB1cmkgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IsIHt0eXBlOiAndGV4dC9qYXZhc2NyaXB0J30pO1xuICAgICAgd29ya2VyID0gbmV3IFdvcmtlcih1cmkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZighV29ya2VyKSB7XG4gICAgICAgIHRocm93ICdZb3UgbmVlZCBub2RlIDEwLnggdG8gdXNlIHdvcmtlcnMnO1xuICAgICAgfVxuICAgICAgd29ya2VyID0gbmV3IFdvcmtlcihmdW5jV3JhcHBlZCwge2V2YWw6IHRydWV9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gd29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFR1cm4gYSBmdW5jdGlvbiBpbnRvIGFuIG9iamVjdCBmb3Igc2VuZGluZyB0byBhIHdvcmtlci5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gICAqIEByZXR1cm4ge09iamVjdH0gRnVuY3Rpb24gbWVzc2FnZSBvYmplY3QuXG4gICAqL1xuICBzdGF0aWMgZnVuY3Rpb25Ub01lc3NhZ2UoZnVuYywgbmFtZSkge1xuICAgIHZhciBmdW5jU3RyaW5nID0gVXRpbHMuZnVuY1RvU3RyaW5nKGZ1bmMpO1xuICAgIHZhciBhcmdzID0gZnVuY1N0cmluZy5zdWJzdHJpbmcoZnVuY1N0cmluZy5pbmRleE9mKCcoJykgKyAxLCBmdW5jU3RyaW5nLmluZGV4T2YoJyknKSk7XG4gICAgdmFyIGJvZHkgPSBmdW5jU3RyaW5nLnN1YnN0cmluZyhmdW5jU3RyaW5nLmluZGV4T2YoJ3snKSArIDEsIGZ1bmNTdHJpbmcubGFzdEluZGV4T2YoJ30nKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogbmFtZSB8fCBmdW5jLm5hbWUsXG4gICAgICBhcmdzOiBhcmdzLFxuICAgICAgYm9keTogYm9keSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByYW5kb20gaWQuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByZWZpeCBBIHN0cmluZyB0byBwcmVmaXggdGhlIGlkIHdpdGguXG4gICAqIEByZXR1cm4ge1N0cmluZ30gQSBzdHJpbmcgaWQuXG4gICAqL1xuICBzdGF0aWMgcmFuZG9tSWQocHJlZml4ID0gJycpIHtcbiAgICByZXR1cm4gcHJlZml4ICsgJ18nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogRGF0ZS5ub3coKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVdGlscztcbiIsIi8qKlxuICAqIHdvcmtlclxuICAqL1xuZnVuY3Rpb24gd29ya2VyKCkge1xuICBjb25zdCBmdW5jTWFwID0gbmV3IE1hcCgpO1xuXG4gIC8qKlxuICAgKiBQb3N0cyB0aGUgcmVzdWx0IG9mIGEgY2FsbGVkIHdvcmtlciBmdW5jdGlvbiBiYWNrIHRvIHRoZSBtYWluIHRocmVhZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG1lc3NhZ2UgTWVzc2FnZSBvYmplY3QgZm9yIGZ1bmN0aW9uIGNhbGxlZC4gXG4gICAqIEBwYXJhbSB7Kn0gcmVzdWx0IFRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAqL1xuICBjb25zdCBwb3N0UmVzdWx0ID0gKG1lc3NhZ2UsIHJlc3VsdCkgPT4ge1xuICAgIHBvc3RNZXNzYWdlKHtcbiAgICAgIHR5cGU6ICdyZXN1bHQnLFxuICAgICAgbmFtZTogbWVzc2FnZS5uYW1lLFxuICAgICAgY2FsbElkOiBtZXNzYWdlLmNhbGxJZCxcbiAgICAgIHJlc3VsdFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQb3N0IGFuIGVycm9yIGJhY2sgdG8gdGhlIG1haW4gdGhyZWFkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSB0aGUgbWVzc2FnZSB3aGljaCBjYWxsZWRcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBlcnIgVGhlIGVycm9yIHRvIHBvc3QgdG8gbWFpbiB0aHJlYWQuXG4gICAqL1xuICBjb25zdCBwb3N0RXJyb3IgPSAobWVzc2FnZSwgZXJyKSA9PiB7XG4gICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgIG5hbWU6IG1lc3NhZ2UubmFtZSxcbiAgICAgIGNhbGxJZDogbWVzc2FnZS5jYWxsSWQsXG4gICAgICBlcnJcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBmdW5jdGlvbiBmcm9tIHRoZSBtZXNzYWdlIG9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSBNZXNzYWdlIG9iamVjdCBmcm9tIG1haW4gdGhyZWFkLlxuICAgKi9cbiAgY29uc3QgY29tcGlsZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgY29tcGlsZWQgPSBuZXcgRnVuY3Rpb24obWVzc2FnZS5mdW5jLmFyZ3Muc3BsaXQoJywnKSwgbWVzc2FnZS5mdW5jLmJvZHkpO1xuICAgIGZ1bmNNYXAuc2V0KG1lc3NhZ2UuZnVuYy5uYW1lLCBjb21waWxlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGZ1bmN0aW9uIGZyb20gdGhlIG1lc3NhZ2Ugb2JqZWN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSBNZXNzYWdlIG9iamVjdCBmcm9tIG1haW4gdGhyZWFkLlxuICAgKi9cbiAgY29uc3QgY2FsbCA9IGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZ1bmNNYXAuZ2V0KG1lc3NhZ2UubmFtZSkoLi4ubWVzc2FnZS5hcmdzKTtcbiAgICAgIHBvc3RSZXN1bHQobWVzc2FnZSwgcmVzdWx0KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHBvc3RFcnJvcihtZXNzYWdlLCBlcnIpO1xuICAgIH1cbiAgfTtcblxuICBvbm1lc3NhZ2UgPSAoZXYpID0+IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXYuZGF0YTtcblxuICAgIG1lc3NhZ2UudHlwZSA9PT0gJ2NvbXBpbGUnID8gY29tcGlsZShtZXNzYWdlKVxuICAgICAgOiBtZXNzYWdlLnR5cGUgPT09ICdjYWxsJyA/IGNhbGwobWVzc2FnZSlcbiAgICAgIDogMDtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3b3JrZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9